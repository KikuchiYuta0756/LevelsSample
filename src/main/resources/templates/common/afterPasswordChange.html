<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1, shrink-to-fit=no">
	<title>パスワード変更</title>
	<!--CSS読込-->
	<link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
	<link rel="stylesheet" th:href="@{/css/login/login.css}">
	<!--JS読込-->
	<script th:src="@{/webjars/jquery/jquery.min.js}" defer></script>
	<script th:src="@{/webjars/bootstrap/bootstrap.min.js}" defer></script>	
</head>

<body>
	<div class="text-center">
		<h2>パスワード変更</h2>
		<!-- エラーメッセージ表示エリア -->
		<div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

		<!--入力フォーム-->
		<form id="create-form" class="form-login" method="post" th:action="@{/common/afterPasswordChange}" th:object="${passwordChangeForm}">
			<table class="table table-striped table-bordered table-hover">
				<input type="hidden" th:field="*{loginId}" />
				<input type="hidden" th:field="*{userName}" />
				<!--ログイン変更フォーム-->
				<tbody>
					<tr>
						<th>ログインID</th>
						<td>
							<div th:text="*{loginId}" />
						</td>
					</tr>
					<tr>
						<th>ユーザ名</th>
						<td>
							<div th:text="*{userName}" />
						</td>
					</tr>
					<tr>
						<th>
							<label for="password" th:text="#{newPassword}"></label>
						</th>
						<td>
							<input type="password" id="password" class="form-control" 
							th:field="*{password}" th:errorclass="is-invalid" />
						    <div class="invalid-feedback" th:errors="*{password}"></div>
						</td>
					</tr>
					<tr>
						<th>新パスワード（確認用）</th>
						<td>
							<input type="password" id="confirm_password" name="confirm_password" class="form-control" required />
						</td>
					</tr>
				</tbody>
			</table>
			<!--ボタンエリア-->
            <div class="row">
                <div class="col text-left">
                    <a class="nav-link" th:href="@{'/admin/clockInListADM'}">戻る</a>
                </div>
                <div class="col text-right">
                    <button class="btn btn-primary" type="submit">変更</button>
                </div>
            </div>
		</form>
		<script>
			var password = document.getElementById("password");
			var confirm_password = document.getElementById("confirm_password");

			function validatePassword() {
				if (password.value != confirm_password.value) {
					confirm_password.setCustomValidity("パスワードが一致しません");
				} else {
					confirm_password.setCustomValidity('');
				}
			}

			password.onchange = validatePassword;
			confirm_password.onkeyup = validatePassword;
		</script>
	</div>
</body>
</html>