<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
 xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
 layout:decorate="~{layout/layout}">
<head>
	<title>当月勤怠一覧</title>
	<!--CSS読込-->
	<link rel="stylesheet" th:href="@{/css/user/clockList.css}">
</head>
<body>
　　　<div layout:fragment="content">
	<div class="header border-bottom">
		<span class="h2">月次勤怠一覧</span>
    <!--年月選択フォーム-->
   <form id="select-year-month" method="post" th:action="@{/user/selectYearMonths}" >
		<label for="yearMonth">年月選択</label>
		<select name="selectYearMonth" id="yearMonth">
			<option th:each="yearMonth : ${yearMonths}" 
			 th:value="${yearMonth}" th:text="${yearMonth}">
			 </option>
		</select>
		<input type="submit" value="選択"/>
	</form>
	<!--各月の勤怠時間合計を表示-->
	<form id="worktime-total-form" th:object="${workTimeTotalForm}">	
    <table class="table2 table-bordered">
    <thead>
    <tr>
		<th>対象月</th>
		<th>出勤日数</th>
		<th>総勤務時間</th>	
		<th>総残業時間</th>
	</tr>
	</thead>
	<tbody>
	<tr>
		<td>
			<div th:if="*{workDateMonth !=null}" th:text="*{workDateMonth}"/>
		</td>
		<td>
			<div th:if="*{workDateTotal !=null}" th:text="*{workDateTotal}"/>
		</td>
		<td>
			<div th:if="*{actWorkTimeTotal !=null}" th:text="*{actWorkTimeTotal}"/>
		</td>
		<td>
			<div th:if="*{overTimeTotal !=null}" th:text="*{overTimeTotal}"/>
		</td>
	</tr>
	</tbody>
	</table>
	</form>
	<div>
	  <a class="nav-link" th:href="@{'/user/paidRequest'}">有給申請</a>
	  <a class="nav-link" th:href="@{'/user/correctRequest'}">修正申請</a>
	</div>
    <!--CSV出力フォーム-->
   <form id="select-year-month" method="post" th:action="@{/user/csvOutput}" class="select-year-month">
		<select name="selectYearMonth" id="yearMonth">
			<option th:each="yearMonth : ${yearMonths}" 
			 th:value="${yearMonth}" th:text="${yearMonth}">
			 </option>
		</select>
		<input class="btn btn-success" type="submit" value="CSV出力"/>
	</form>

    
	<!--月次勤怠情報-->
	<div>
	<table class="table table-striped table-bordered table-hover">
		<thead class="thead-light">
			<tr>
				<th class="th-width">修正</th>
				<th class="th-width">日付</th>
				<th class="th-width">曜日</th>
				<th class="th-width">出勤時間</th>
				<th class="th-width">退勤時間</th>
				<th class="th-width">休憩時間</th>
				<th class="th-width">実働時間</th>
				<th class="th-width">残業時間</th>
				<th class="th-width">出勤区分</th>
				<th class="th-width">備考</th>
			</tr>
		</thead>
　　　　　　<tbody>	
			    <tr th:each="items:${clockList}" name="clockListDate">
				<td>
				 <input type="checkbox" name="checkbox-name"/>
				</td>
				<td th:text="${items.workDate}"></td>
				<td th:text="${items.dayofweekId}"></td>
				<td th:text="${items.startTime}"></td>
				<td th:text="${items.closeTime}"></td>
				<td th:text="${#temporals.format(items.restTime,'HH:mm')}"></td>
				<td th:text="${#temporals.format(items.actWorkTime,'HH:mm')}"></td>
				<td th:text="${#temporals.format(items.overTime,'HH:mm')}"></td>
				<td></td>
				<td></td>
			</tr>
		</tbody>
	</table>
	</div>
　　　</div>
    <script>
        document.getElementById('csvForm').addEventListener('submit', function(event) {
            event.preventDefault();
            var data = document.getElementById('clockListDate').value;
            generateCSV(data);
        });

        function generateCSV(data) {
            // Ajaxやサーブレットを使ってサーバーにデータを送信し、CSVファイルを生成する処理を記述
        }
    </script>

</body>
</html>